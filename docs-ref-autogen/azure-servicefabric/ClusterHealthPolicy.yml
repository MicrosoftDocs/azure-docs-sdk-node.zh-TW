### YamlMime:UniversalReference
ms.openlocfilehash: f6ee4c3e6138a35965b5f008694dede094c32ffa
ms.sourcegitcommit: efa2d98deffe8a0d41a8d63f9f07aa720862e6ab
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/13/2018
ms.locfileid: "52132243"
items:
- uid: azure-servicefabric.ClusterHealthPolicy
  name: ClusterHealthPolicy
  fullName: ClusterHealthPolicy
  children:
  - azure-servicefabric.ClusterHealthPolicy.applicationTypeHealthPolicyMap
  - azure-servicefabric.ClusterHealthPolicy.considerWarningAsError
  - azure-servicefabric.ClusterHealthPolicy.maxPercentUnhealthyApplications
  - azure-servicefabric.ClusterHealthPolicy.maxPercentUnhealthyNodes
  langs:
  - typeScript
  type: interface
  summary: <span data-ttu-id="6e15d-101">定義用來評估叢集或叢集節點的健全狀況的健全狀況原則。</span><span class="sxs-lookup"><span data-stu-id="6e15d-101">Defines a health policy used to evaluate the health of the cluster or of a cluster node.</span></span>
  package: azure-servicefabric
- uid: azure-servicefabric.ClusterHealthPolicy.applicationTypeHealthPolicyMap
  name: applicationTypeHealthPolicyMap
  fullName: applicationTypeHealthPolicyMap
  children: []
  langs:
  - typeScript
  type: property
  summary: >
    <span data-ttu-id="6e15d-102">對於特定應用程式類型，定義具有最大健康情況不良應用程式百分比的對應。</span><span class="sxs-lookup"><span data-stu-id="6e15d-102">Defines a map with max percentage unhealthy applications for specific application types.</span></span>

    <span data-ttu-id="6e15d-103">每個項目都會指定應用程式類型名稱做為一個索引鍵，並指定一個整數的值，表示用來評估指定應用程式類型之應用程式的 MaxPercentUnhealthyApplications 百分比。</span><span class="sxs-lookup"><span data-stu-id="6e15d-103">Each entry specifies as key the application type name and as value an integer that represents the MaxPercentUnhealthyApplications percentage used to evaluate the applications of the specified application type.</span></span>

    <span data-ttu-id="6e15d-104">應用程式類型的健康狀態原則對應可以在叢集健康狀態評估期間，用來描述特殊的應用程式類型。</span><span class="sxs-lookup"><span data-stu-id="6e15d-104">The application type health policy map can be used during cluster health evaluation to describe special application types.</span></span>

    <span data-ttu-id="6e15d-105">對應中包含的應用程式類型是針對在對應中指定的百分比進行評估，不包含在叢集健康原則中定義的全域 MaxPercentUnhealthyApplications。</span><span class="sxs-lookup"><span data-stu-id="6e15d-105">The application types included in the map are evaluated against the percentage specified in the map, and not with the global MaxPercentUnhealthyApplications defined in the cluster health policy.</span></span>

    <span data-ttu-id="6e15d-106">對應中指定之應用程式類型的應用程式不會針對應用程式的全域集區進行計算。</span><span class="sxs-lookup"><span data-stu-id="6e15d-106">The applications of application types specified in the map are not counted against the global pool of applications.</span></span>

    <span data-ttu-id="6e15d-107">例如，如果某個類型的某些應用程式非常重要，叢集系統管理員可以針對該應用程式類型將項目新增至對應，並且為它指派 0% 的值 (也就是不容忍任何失敗)。</span><span class="sxs-lookup"><span data-stu-id="6e15d-107">For example, if some applications of a type are critical, the cluster administrator can add an entry to the map for that application type and assign it a value of 0% (that is, do not tolerate any failures).</span></span>

    <span data-ttu-id="6e15d-108">其他所有應用程式則可以使用設為 20% 的 MaxPercentUnhealthyApplications 來進行評估，以容忍數千個應用程式執行個體發生一些失敗。</span><span class="sxs-lookup"><span data-stu-id="6e15d-108">All other applications can be evaluated with MaxPercentUnhealthyApplications set to 20% to tolerate some failures out of the thousands of application instances.</span></span>

    <span data-ttu-id="6e15d-109">只有在叢集資訊清單使用 HealthManager/EnableApplicationTypeHealthEvaluation 的設定項目啟用應用程式類型健康情況評估時，才會使用應用程式類型健康原則對應。</span><span class="sxs-lookup"><span data-stu-id="6e15d-109">The application type health policy map is used only if the cluster manifest enables application type health evaluation using the configuration entry for HealthManager/EnableApplicationTypeHealthEvaluation.</span></span>
  optional: true
  syntax:
    content: 'applicationTypeHealthPolicyMap?: ApplicationTypeHealthPolicyMapItem[]'
    return:
      type:
      - azure-servicefabric.ApplicationTypeHealthPolicyMapItem[]
  package: azure-servicefabric
- uid: azure-servicefabric.ClusterHealthPolicy.considerWarningAsError
  name: considerWarningAsError
  fullName: considerWarningAsError
  children: []
  langs:
  - typeScript
  type: property
  summary: <span data-ttu-id="6e15d-110">可指示是否將具有相同嚴重性的警告視為錯誤。</span><span class="sxs-lookup"><span data-stu-id="6e15d-110">Indicates whether warnings are treated with the same severity as errors.</span></span>
  optional: true
  syntax:
    content: 'considerWarningAsError?: boolean'
    return:
      type:
      - boolean
  package: azure-servicefabric
- uid: azure-servicefabric.ClusterHealthPolicy.maxPercentUnhealthyApplications
  name: maxPercentUnhealthyApplications
  fullName: maxPercentUnhealthyApplications
  children: []
  langs:
  - typeScript
  type: property
  summary: >
    <span data-ttu-id="6e15d-111">在報告錯誤之前，允許健康情況不良應用程式的最大百分比。</span><span class="sxs-lookup"><span data-stu-id="6e15d-111">The maximum allowed percentage of unhealthy applications before reporting an error.</span></span> <span data-ttu-id="6e15d-112">例如，若要允許 10% 的應用程式健康情況不良，這個值會是 10。</span><span class="sxs-lookup"><span data-stu-id="6e15d-112">For example, to allow 10% of applications to be unhealthy, this value would be 10.</span></span>

    <span data-ttu-id="6e15d-113">百分比表示在系統將叢集視為錯誤之前，容許應用程式健康情況不良的最大百分比。</span><span class="sxs-lookup"><span data-stu-id="6e15d-113">The percentage represents the maximum tolerated percentage of applications that can be unhealthy before the cluster is considered in error.</span></span>

    <span data-ttu-id="6e15d-114">如果未到達此百分比，但至少有一個健康情況不良的應用程式，則健康情況會評估為 Warning。</span><span class="sxs-lookup"><span data-stu-id="6e15d-114">If the percentage is respected but there is at least one unhealthy application, the health is evaluated as Warning.</span></span>

    <span data-ttu-id="6e15d-115">此計算是將健康情況不良的應用程式數目除以叢集中應用程式執行個體的總數而得，但不包括 ApplicationTypeHealthPolicyMap 所包含之應用程式類型的應用程式。</span><span class="sxs-lookup"><span data-stu-id="6e15d-115">This is calculated by dividing the number of unhealthy applications over the total number of application instances in the cluster, excluding applications of application types that are included in the ApplicationTypeHealthPolicyMap.</span></span>

    <span data-ttu-id="6e15d-116">針對少量的應用程式數目，計算會四捨五入以容許一個失敗。</span><span class="sxs-lookup"><span data-stu-id="6e15d-116">The computation rounds up to tolerate one failure on small numbers of applications.</span></span> <span data-ttu-id="6e15d-117">預設百分比是零。</span><span class="sxs-lookup"><span data-stu-id="6e15d-117">Default percentage is zero.</span></span>
  optional: true
  syntax:
    content: 'maxPercentUnhealthyApplications?: number'
    return:
      type:
      - number
  package: azure-servicefabric
- uid: azure-servicefabric.ClusterHealthPolicy.maxPercentUnhealthyNodes
  name: maxPercentUnhealthyNodes
  fullName: maxPercentUnhealthyNodes
  children: []
  langs:
  - typeScript
  type: property
  summary: >
    <span data-ttu-id="6e15d-118">在報告錯誤之前，允許健康情況不良節點的最大百分比。</span><span class="sxs-lookup"><span data-stu-id="6e15d-118">The maximum allowed percentage of unhealthy nodes before reporting an error.</span></span> <span data-ttu-id="6e15d-119">例如，若要允許 10% 的節點健康情況不良，這個值會是 10。</span><span class="sxs-lookup"><span data-stu-id="6e15d-119">For example, to allow 10% of nodes to be unhealthy, this value would be 10.</span></span>

    <span data-ttu-id="6e15d-120">百分比表示在叢集被視為處於錯誤狀態之前，容許節點健康情況不良的最大百分比。</span><span class="sxs-lookup"><span data-stu-id="6e15d-120">The percentage represents the maximum tolerated percentage of nodes that can be unhealthy before the cluster is considered in error.</span></span>

    <span data-ttu-id="6e15d-121">如果未到達此百分比，但至少有一個健康情況不良的節點，則健康情況會評估為 Warning。</span><span class="sxs-lookup"><span data-stu-id="6e15d-121">If the percentage is respected but there is at least one unhealthy node, the health is evaluated as Warning.</span></span>

    <span data-ttu-id="6e15d-122">百分比是將健康情況不良節點數目除以叢集中的節點總數計算而得。</span><span class="sxs-lookup"><span data-stu-id="6e15d-122">The percentage is calculated by dividing the number of unhealthy nodes over the total number of nodes in the cluster.</span></span>

    <span data-ttu-id="6e15d-123">針對較少的節點數目，計算會四捨五入以容許一個失敗。</span><span class="sxs-lookup"><span data-stu-id="6e15d-123">The computation rounds up to tolerate one failure on small numbers of nodes.</span></span> <span data-ttu-id="6e15d-124">預設百分比是零。</span><span class="sxs-lookup"><span data-stu-id="6e15d-124">Default percentage is zero.</span></span>


    <span data-ttu-id="6e15d-125">在大型叢集中，永遠都有一些節點會關閉或需要修復，因此應設定此百分比來容許這種情形。</span><span class="sxs-lookup"><span data-stu-id="6e15d-125">In large clusters, some nodes will always be down or out for repairs, so this percentage should be configured to tolerate that.</span></span>
  optional: true
  syntax:
    content: 'maxPercentUnhealthyNodes?: number'
    return:
      type:
      - number
  package: azure-servicefabric
references:
- uid: azure-servicefabric.ApplicationTypeHealthPolicyMapItem[]
  name: ApplicationTypeHealthPolicyMapItem[]
  spec.typeScript:
  - name: ApplicationTypeHealthPolicyMapItem
    fullName: ApplicationTypeHealthPolicyMapItem
    uid: azure-servicefabric.ApplicationTypeHealthPolicyMapItem
  - name: '[]'
    fullName: '[]'
